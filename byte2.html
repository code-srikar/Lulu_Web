<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Registration</title>
    <link rel="stylesheet" href="byte2.css">
</head>
<body>
    <script src="byte2.js"></script>
    <div id="mn">
        <div id="bx2">
            <div id="dtl">
                <h2 id="lul" >LULU Bank</h2>
            </div>
           <div id="dtr">
                <div id="st">
                        <div id="flexitem"><a href="proj.html">Home</a></div>
                        <div id="flexitem" style="text-align: center;"><a href="about.html" >About</a></div>
                        <div id="flexitem"><a href="contactus.html" style="text-align: center;margin-right: 10px;">Download </a></div>
                        <div id="flexitem"><a href="contactus.html">Contact Us </a></div>
</div>
                <div id="so">
                    <a href="detail.html">
                        <img src="prof.png" alt="profile pic" id="imp">
                    </a>
                </div>
            </div>
        </div>
    </div>
    <!-- <div class="header">
        <div class="title" onclick="location.href='byte2.html'"><h1>LULU BANK</h1></div>
        <div class="login" onclick="location.href='byte.html'">Login</div>
    </div> -->
    <main>
        <div class="first">
            <div class="reg">
                <h1>REGISTER</h1>
            </div>
                <div class="main">
                <input type="text" name="username" id="username" placeholder="Enter Username" required><br><br>
                <input type="password" class="pass" name="pass" id="pass" placeholder="Enter Password" required><br><br>
                <input type="password" class="passs" name="passs" id="passs" placeholder="Re-enter Password" required><br><br>
                <input type="text" name="num" id="num" placeholder="Enter Mobile number" required><br><br>

                <input type="email" name="em" id="em" placeholder="Enter Email address" required><br><br>

                <input type="text" name="ac" id="ac" placeholder="Enter Account number" required>
                <div class="sign" id="signup" name="signup">SignUp</div>
                <!--<p>Existing Customer?<a href="byte.html">Click Here</a></p>-->
                <!--<button type="submit" name="signup" id="signup" >Sign Up</button>-->
            </div>
        </div>
    </main>
</body>
<script type="module">
    // Import the functions you need from the SDKs you need
    import { initializeApp } from "https://www.gstatic.com/firebasejs/10.8.0/firebase-app.js";
    import { getAuth, createUserWithEmailAndPassword, sendEmailVerification  } from "https://www.gstatic.com/firebasejs/10.8.0/firebase-auth.js";
    // TODO: Add SDKs for Firebase products that you want to use
    // https://firebase.google.com/docs/web/setup#available-libraries
  
    // Your web app's Firebase configuration
    const firebaseConfig = {
      apiKey: "AIzaSyC1BIQDt4MVn2h1Wq0Xxt09wkZe66K7Lik",
      authDomain: "lulu-bank-90869.firebaseapp.com",
      projectId: "lulu-bank-90869",
      storageBucket: "lulu-bank-90869.appspot.com",
      messagingSenderId: "695316046662",
      appId: "1:695316046662:web:9fa4c6c839c2f2dbd5fb47"
    };
  
    // Initialize Firebase
    const app = initializeApp(firebaseConfig);
    const auth = getAuth();

    console.log(app);
    
    document.getElementById("signup").addEventListener("click",function(){
        var email = document.getElementById("em").value;
        var password = document.getElementById("pass").value;
        var re_password = document.getElementById("passs").value;
        var username = document.getElementById("username").value;
        var mb_no = document.getElementById("num").value;
        var acc_no = document.getElementById("ac").value;

        if(email!="" && password!="" && re_password!="" && username!="" && mb_no!="" && acc_no!=""){
            if (password == re_password) {
        
                createUserWithEmailAndPassword(auth,email,password)
                .then((userCredential) =>{
                    const user = userCredential.user;
                    console.log(user);
                    alert("Registration successful");
                    email = document.getElementById("em").value="";
                    password = document.getElementById("pass").value="";
                    re_password = document.getElementById("passs").value="";
                    username = document.getElementById("username").value="";
                    mb_no = document.getElementById("num").value="";
                    acc_no = document.getElementById("ac").value="";
                    sendEmailVerification(auth.currentUser)
                    .then(() => {
                        alert( "verification mail sent" );
                        // Email verification sent!
                        // ...
                    });
                })
                .catch((error) => {
                    const errorCode = error.code;
                    const errorMessage = error.message;
                    console.log(errorMessage);
                });
            }
            else{
                alert("Passwords do not match");
            }
            }else{
                alert('Please fill all the fields');
            }
    });
  </script>
</html>
